package me.zwad3.pseudosockettest;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.view.SurfaceView;
import android.view.View;

public class InterfaceView extends SurfaceView {

	private Bitmap button;
	private JoystickDrawer drawer;
	private SurfaceHolder holder;
	
	public InterfaceView(Context context) {
		super(context);
		button = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
		drawer = new JoystickDrawer(this);
        holder = getHolder();
        holder.addCallback(new SurfaceHolder.Callback() {

               @Override
               public void surfaceDestroyed(SurfaceHolder holder) {
                      boolean retry = true;
                      gameLoopThread.setRunning(false);
                      while (retry) {
                             try {
                                   gameLoopThread.join();
                                   retry = false;
                             } catch (InterruptedException e) {
                             }
                      }
               }

               @Override
               public void surfaceCreated(SurfaceHolder holder) {
                      gameLoopThread.setRunning(true);
                      gameLoopThread.start();
               }

               @Override
               public void surfaceChanged(SurfaceHolder holder, int format,
                             int width, int height) {
               }
        });
		// TODO Auto-generated constructor stub
	}
	
	public void draw(Canvas canvas) {
        canvas.drawColor(Color.BLACK);
        canvas.drawBitmap(button, canvas.getWidth()/2-button.getWidth()/2, canvas.getHeight()/2-button.getHeight()/2, null);
    }
	
	

}
